### 异步





异步

```java
try {
    Future<Object> vidoe = asynService.findVideoDetails(id);
    Future<Object> common = asynService.getCommon(1, 10, String.valueOf(id), userLogin.getUserId(),
                                                  CommentTypeEnum.Videos.getCode());
    for (; ; ) {
        if (common.isDone() && vidoe.isDone()) {
            break;
        }
    }
    List<ReplyListDto> replyListDto = (List<ReplyListDto>) common.get();
    Video video = (Video) vidoe.get();
    BeanUtils.copyProperties(video, videoDto);
    videoDto.setReplyListDtos(replyListDto);
} catch (Exception e) {
    LOGGER.error("获取视频详情出错", e);
    throw new BusinessException(500, "服务异常");
}
```

```java
@Async
@Override
public Future<Object> findVideoDetails(Integer id) {
    return new AsyncResult<>(videoMapper.selectById(id));
}

@Async
@Override
public Future<Object> getCommon(Integer page ,Integer pageSize,String id,String userId,Integer type) {
    ReplyPageParemDto replyPageParemDto = new  ReplyPageParemDto();
    replyPageParemDto.setPage(page);
    replyPageParemDto.setPageSize(pageSize);
    replyPageParemDto.setFormId(id);
    replyPageParemDto.setType(type);
    replyPageParemDto.setUserid(userId);
    List<ReplyListDto> replyListDto =  iSubjectsDynamicReplyService.findList(replyPageParemDto);
    return new AsyncResult<>(replyListDto);
}
```





