### 1.关系数据结构以及形式化定义

#### 1.1关系

- **域**：一组具有相同数据类型的值得集合。
- **笛卡尔积**：给定一组域D1,D2,...,Dn,允许其中某些域是相同的。   D1,D2,...,Dn的笛卡尔积为：  

  D1 x D2 x ... x Dn = {(d1,d2,d3,...,dn) | di∈Di,i=1,2,...,n}   

  其中每一个元素(d1,d2,d3,...,dn)叫做一个n元组，或简称**元组**。  

  元素中的每一个值di叫做一个**分量**。
- **关系** ：D1 x D2 x ... x D3 的子集叫做在域D1,D2,...,Dn 上的关系，表示为R(D1,D2,...,Dn)。R表示关系的名字，n是**目**或**度**。关系是笛卡尔积的有限子集。  

  关系中的每个元素是关系中的**元组**，通常用t表示。  

  当n=1时，为**单元（或一元）关系**；当n=2时，为**二元关系**。  

  **候选码**：关系中能唯一地标识一个元组的一组属性。候选码的所有属性称为**主属性**；不包含在任何候选码中的属性称为**非主属性（或非码属性）**；当关系的所有属性都是候选码，称为**全码**。

  **主码**：多个候选码选择一个当主码。

#### 1.2关系模式

**关系模式：**关系的描述，可以形式化地表示为R ( U, D, DOM, F ) 。R为关系名，U为组成该关系的属性名集合，D为U中的属性所来自的域，DOM为属性向域的映像集合，F为属性间数据的依赖关系集合。关系模式通常可以简记为R ( U )或R ( A1, A2, ..., An )，A1, A2, ... , An 为属性名。  

**关系和关系模式：**关系是关系模式在某一时刻的状态或内容，是动态的、随时间不断变化的。关系模式是关系的描述，是静止的、稳定的。实际工作中，常把关系模式和关系都笼统的称为关系，可以从上下文中加以区别。  

#### 1.3关系数据库

在关系模型中，实体以及实体间的联系都是用关系来表示的。一个给定的应用领域中，所有关系的集合构成一个关系数据库。  

关系数据库的**型**：关系数据库模式，是对关系数据库的描述，包括若干域的定义，以及在这些域上的若干关系模式。  

关系数据库的**值**：所有关系模式在某一时刻的关系的集合，通常就称为关系数据库。  

#### 1.4关系模型的存储结构

关系数据模型中的实体及实体间的联系都用表来表示，但表是关系数据的逻辑模型。在关系数据库的物理组织中，有的关系数据库管理系统中一个表对应一个操作系统文件，将物理数据组织交给操作系统完成；而有的则从操作系统那里申请若干个大的文件，自己划分文件空间，组织表、索引等存储结构，并进行存储管理。

### 2.关系操作

#### 2.1基本的关系操作

常用关系操作包括**查询操作**和**插入、删除、修改操作**两大部分。   

**查询操作**可以分为：**选择、投影、连接、除、并、差、交、笛卡尔积等**。其中**选择、投影、并、差、笛卡尔积**是**5种基本操作**，其他操作可以用基本操作来定义和导出。  

#### 2.2关系数据语言的分类

**关系数据语言**：关系代数语言、关系演算语言（元组关系演算语言、域关系演算语言）、具有关系代数和关系演算双重特点的语言（例如SQL）

#### 2.3关系完整性

关系模型的完整性规则是对关系的某种约束条件，包括**三种**完整性约束：**实体完整性、参照完整性、用户自定义的完整性**。  

**实体完整性：**关系的主属性不能取空值。即主键不能为空。   

**参照完整性：**关系的外码（外键）属性值要么为空值，要么等于被参照的属性列的一个值。被作为外键的使用的列，若元组对应列的值被参照则无法删除该元组。  

**用户自定义的完整性：**某个属性（字段）定义为非空、唯一值等。    

#### 2.4关系代数

关系代数：抽象的查询语言，用对关系的运算来表示查询。运算对象和结果都是关系，预算符包括：集合运算符（并、差、交、笛卡尔积）、专门的关系运算符（选择、投影、连接、除）。  另外还有比较运算符和逻辑运算符辅助关系运算符。  

- 并：$R\cup S=\{t|t\in R\lor t\in S\}$   即属于R或属于S的元组。  

- 差：$R-S=\{t|t\in R\land t\notin S\}$  即属于R而不属于S的元组。    

- 交：$R\cap S = \{ t|t\in R \land t\in S\}$  即属于R且属于S的元组。  

- 笛卡尔积：$R\times S=\{\overset\frown {t_rt_s}|t_r\in S \land t_s\in R\}$   此处为广义的笛卡尔积，因为元素为元组，原本定义中为元素为单个属性。表示：n目的关系R和m目的关系S 的笛卡尔积为一个（n+m）列的元组集合，其中前n列为R的一个元组，后m列为S的一个元组，元组个数为R的元组个数乘以S的元组个数。  

- 选择（限制）： $\sigma _F(R)=\{t|t\in R\land F(t)='真'\}$  选择某些满足条件 F 的元组。 

- 投影：$\Pi_A(R)=\{t[A]\in R\}$  选择关系中某些列组成新的关系，A 为R中的一些属性列。  

- 连接：$\mathop{R\Join S}\limits_{A\theta B}=\{\overset\frown {t_rt_s}|t_r\in R\land t_s\in S\land t_r[A]\theta t_s[B]\}$  其中，A和B为等值、非等值、自然连接、外连接、左外连接、右外连接

- 除： 
