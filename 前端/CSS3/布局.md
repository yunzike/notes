---
title: 布局  
date: 2019-02-14 10:04:29  
categories: CSS   
tags:  
 - CSS布局
---
网页布局三大流派：标准文档流、浮动流、定位流

### 一、标准文档流（normal flow）
本质为normal flow（普通流、常规流）,将窗体自上而下分成一行一行，所有的元素默认情况下都是在文档流中存在的,块级元素从上至下、行内元素在每行中从左至右的顺序依次排放元素。  

元素在文档流中的特点：  
块元素  
1、默认宽度是父元素的全部  
2、默认高度被内容（子元素）撑开  
3、在页面中自上而下垂直排列  
内联元素  
1、默认高度和宽度都被内容撑开  
2、在页面中自左向右水平排列，如果一行不足以容下所有的元素则换到下一行继续从左向右  

更改元素状态：
display:none,设置元素不显示。display:none 与 visibility:hidden 的区别display:none 不显示且不占位，但 visibility:hidden 不显示但占位。


2、BFC（Block formatting context块格式化上下文）
块级格式化上下文：一个独立的渲染区域，只有Block-level box（块级盒）参与，它规定了内部的Block-level Box（块级盒）如何布局，并且与这个区域外部毫不相干。


- 2.1一切皆为框
div、h1 或 p 元素常常被称为块级元素。这意味着这些元素显示为一块内容，即“块框”。
与之相反，span 和 strong 等元素称为“行内元素”，这是因为它们的内容显示在行中，即“行内框”。
可以使用 display属性改变生成的框的类型，可以应用于所有标签。
即，通过将 display 属性设置为 block，可以让行内元素（比如 <a> 元素）表现得像块级元素一样。
还可以通过把 display 设置为 none，让生成的元素根本没有框。这样的话，该框及其所有内容就不再显示，不占用文档中的空间。


- 2.2 无名块框
 但是在一种情况下，即使没有进行显式定义，也会创建块级元素。
 类似于把一些文本添加到一个块级元素（例div）的开头，会创建块级元素。如下，即使没有把这些文本定义为段落，它也会被当作段落对待：

<div>
    <!--无名块框 some text  -->
    some text
    <p>Some more text.</p>
</div>
 在这种情况下，这个框称为无名块框，因为它不与专门定义的元素相关联。

 块级元素的文本行也会发生类似的情况。假设有一个包含三行文本的段落。每行文本形成一个无名框。无法直接对无名块或行框应用样式，因为没有可以应用样式的地方（注意，行框和行内框是两个概念）。但是，这有助于理解在屏幕上看到的所有东西都形成某种框。

3、BFC规则
① 内部的Box会在垂直方向，一个接一个地放置；
② Box自身垂直方向的位置由margin-top决定，属于同一个BFC的两个相邻Box的margin会发生重叠；
③ Box自身水平方向的位置由margin左或右决定(具体依据参照BFC方位)，属于同一个BFC的两个相邻Box的margin会发生叠加。
````
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>文档流</title>
	<style type="text/css">
		.box {
			width: 200px;
			height: 200px;
			background-color: orange;
 
			/*默认BFC水平布局方向:从左至右*/
			/*margin-left: 50px;*/
 
			/*更改BFC水平布局方向:从右至左*/
            /*更改块为右浮动，即从右往左计算距离，
             若向右移动则 margin-right: -50px;*/
			float: right;
			margin-right: -50px;
		}
		.b1 {
			width: 200px;
			height: 200px;
			background: red;
			margin-left: 10px;
		}
		.bb1, .bb2 {
			width: 50px;
			height: 50px;
			background: cyan;
			float: left;
		}
		.bb1 {
			margin-left: 20px;
			margin-right: 20px;
		}
		.bb2 {
			margin-left: 20px;
		}
	</style>
</head>
<body>
	<!-- b1与b2与box 同在一个区域 | bb1与bb2 同在一个区域 -->
	<div class="b1">
		<div class="bb1"></div>
		<div class="bb2"></div>
	</div>
	<div class="b2"></div>
 
    /*box用来实现BFC的水平布局方式*/
	<div class="box"></div>
</body>
</html>
````

### 二、浮动流(float:none(默认值不浮动)|left|right)  
1、元素设置浮动后会脱离文档流，不在文档流占用位置。并向页面的左上或右上浮动，直到遇到父元素的边框或其他的没有浮动的块元素时则停止浮动;  
2、浮动的兄弟元素从左至右从上到下按顺序排列，同行宽度不够显示则显示于新行开始位置，可实现块级元素同行显示；    
3、浮动元素后跟着的非浮动元素会因为前面的浮动元素没有占用位置，而显示到前面浮动元素的位置，被其覆盖；    
4、浮动元素其实没有完全脱离文档流，虽然脱离的正常的文档流，但是还会占有正常文档流的文本空间和图片，因此浮动元素不会覆盖文字和图片，文字和图片会围绕在浮动元素的周围，可以通过浮动来实现文字环绕图片的效果；   
5、块元素的宽度和高度都被内容撑开(未设置宽高时)，内联元素会变成块元素。  

如下图，当把框 1 向右浮动时，它脱离文档流并且向右移动，直到它的右边缘碰到包含框的右边缘：

![](../../images/006evuW4gy1g05r2wfc1ng30em06hdfo.gif)

下图中，当框 1 向左浮动时，它脱离文档流并且向左移动，直到它的左边缘碰到包含框的左边缘。因为它不再处于文档流中，所以它不占据空间，实际上覆盖住了框 2，使框 2 从视图中消失。  
如果把所有三个框都向左移动，那么框1 1向左浮动直到碰到包含框，另外两个框向左浮动直到碰到前一个浮动框。

![](../../images/006evuW4gy1g05r5eq06bg30em06hq2s.gif)

下图所示，如果包含框太窄，无法容纳水平排列的三个浮动元素，那么其它浮动块向下移动，直到有足够的空间。  
如果浮动元素的高度不同，那么当它们向下移动时可能被其它浮动元素“卡住”：

![](../../images/006evuW4gy1g05r7d5jt6g30em06hglh.gif)

##### 高度塌陷
在文档流中元素的高度默认被子元素撑开，当子元素浮动时，子元素会脱离文档流，
此时将不能撑起父元素的高度，会导致父元素的高度塌陷。父元素高度塌陷会导致其他元素的位置上移，导致页面的布局混乱。

解决方法：
开启元素的BFC(Block Formatting Context)  
它是一个隐含属性，默认情况是关闭，当开启以后元素会具有如下的特性：  
1.父元素的垂直外边距不会和子元素重叠  
2.开启BFC的元素不会被浮动元素覆盖  
3.父元素可以包含浮动的子元素 ******  
如何开启元素的BFC   
1.设置元素浮动(不推荐)  
使用这种方式开启，虽然可以撑开父元素，但是会导致父元素的宽度丢失，而且使用这种方式也会导致下边的元素上移，不能解决问题  
2.设置元素绝对定位(不推荐)  
3.设置元素为inline-block(不推荐)  
可以解决问题，但是会导致宽度丢失，不推荐使用这种方式  
4.将元素的overflow设置为一个非visible的值（aotu hidden）  
推荐方式：将overflow设置为hidden是副作用最小的开启BFC的方式。  
overflow: hidden;  

但是在IE6及以下的浏览器中并不支持BFC，所以使用这种方式不能兼容IE6。  
在IE6中虽然没有BFC，但是具有另一个隐含的属性叫做hasLayout，该属性的作用和BFC类似，所在IE6浏览器可以通过开hasLayout来解决该问题开启方式很多，我们直接使用一种副作用最小的：  
直接将元素的zoom设置为1即可。  
zoom表示放大的意思，后边跟着一个数值，写几就将元素放大几倍  
zoom:1表示不放大元素，但是通过该样式可以开启hasLayout  
zoom这个样式，只在IE中支持，其他浏览器都不支持。  

##### 清除浮动



### 三、定位流
通过定位可以将元素摆放到页面的任意位置  
使用position来设置元素的定位  
可选值：  
static      默认值,不定位  
relative    相对定位,参照物为元素本身的位置，是占位定位。
absolute    绝对定位,绝对定位，脱离文档流，参照物为第一个定位祖先或根元素（<html>元素），不占位。
fixed       固定定位,，脱离文档流，参照物为视窗，不占位。

相对定位
1.相对于元素自身在文档流中的位置进行定位
2.相对定位的元素不会脱离文档流，定位元素的性质不会改变，块还是块，内联还是内联
3.如果不设置偏移量，元素不会发生任何的变化
4.会提升元素的层级
绝对定位
1.相对于离它最近的开启了定位的祖先元素进行定位，如果祖先元素都没有开启定位则相对于浏览器窗口进行定位。
2.绝对定位会使元素完全脱离文档流，会改变元素的性质，内联变成块元素，块元素的宽度被内容撑开
3.绝对定位的元素如果不设置偏移量，元素的位置不会发生变化
4.会提升元素的层级
固定定位
固定定位也是一种绝对定位，它的大部分特点都和绝对定位是相同的。
不同的是：
固定定位永远相对于浏览器窗口进行定位
固定定位会固定在浏览器的指定的位置，不会随页面一起滚动
偏移量
当元素开启了定位以后，可以通过四个偏移量来设置元素的位置
top：相对于定位位置的顶部的偏移量
bottom：相对于定位位置的底部的偏移量
left：相对于定位位置的左侧的偏移量
right：相对于定位位置的右侧的偏移量
一般只需要使用两个值即可给元素进行定位
top left
top right
bottom left
bottom right
偏移量也可以指定一个负值，如果是负值则元素会向相反的方向移动
层级
当元素开启定位以后，可以通过z-index来设置层级，
它需要一个正整数作为参数，值越大层级越高，层级越高越优先显示
如果层级一样，则后边的会盖住前边的，父元素永远都不会盖住子元素。
文档流 < 浮动 < 定位
元素的透明
使用opacity来设置元素的透明度
需要一个0-1之间的值
0 表示完全透明
1 表示完全不透明

IE8及以下的浏览器不支持该样式，需要使用如下方式来设置
filter:alpha(opacity=透明度);

需要一个0-100之间的值
0 表示完全透明
100 表示完全不透明


布局的时候，首先考虑标准流，因为标准流最稳定，其次是浮动流，最后是定位。\



#### 四、常见布局实现
##### 1、左列定宽右列自适应
利用float+margin实现
````
.left{
    width: 100px;
    height: 200px;
    float: left;
}
.right{
    margin-left: 100px;
    height: 200px;
}
````


